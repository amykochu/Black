    <div class="row">
       <h1 class="col-md-11 heading-h1">Refine</h1>
       <div class="col-md-12 refines">
         <form action="" method="get" id="refine-form">
        {% csrf_token %}
        {% for field in search_form %}
         <div class="refine-search-div">
            <button class="rf-btn"> {{ field.label }}</button>
            <div class="refine-search-container">
                <input type="checkbox" class="sel-all"> <label class="select-all-text"> Select all</label>
                {{ field }}
              <div class="rf-apply-btn-div"><a href="#">Cancel</a><button class="rf-apply-btn">Apply</button></div>
            </div>
          </div>
           {% endfor %}
           <button type="submit" style="display:none">Submit</button>
           </form>
       </div>
       <div class="overlay">

      </div>
    </div>

      <script type="text/javascript">
    $(document).ready(function()
    {
      if($(".refine-search-container ul input:checked"))
      {
       $(".refine-search-container ul input:checked").parent().parent().parent().parent().parent().find(".rf-btn").addClass("selected");
        console.log($(this).val());
      }
    $('.sel-all').click(function() {
        if($(this).is(":checked")) {
           $(this).parent().find("input").prop("checked", true);
        }
        else
        {
        $(this).parent().find("input").prop("checked", false);
        }
    });
    $(".refine-search-container ul input").click(function()
    {
    if($(this).is(":checked")) {

         }
         else
         {
         $(".refine-search-container .sel-all").prop("checked", false);
         }
    });
      $(".rf-btn").click(function(event)
      {
        event.preventDefault();
        $(".refine-search-container").hide();
        $(".rf-btn").removeClass("select");
        $(this).addClass("select").parent().find(".refine-search-container").show();
        $(".overlay").show();
      });
        $(".rf-apply-btn").click(function()
      {
        event.preventDefault();
        $(this).parent().parent().hide();
        $(".overlay").hide();
        $(".rf-btn").removeClass("select");
         if($(".refine-search-container ul input:checked"))
          {
           $(".refine-search-container ul input:checked").parent().parent().parent().parent().parent().find(".rf-btn").addClass("selected");
          }
        $("#refine-form").submit();
        

      })
      $(".overlay").click(function()
      {
        $(".overlay").hide();
        $(".refine-search-container").hide();
        $(".rf-btn").removeClass("select");
      })
      $(".collapse").click(function()
      {
        $(".overlay").hide();
        $(".refine-search-container").hide();
        $(".rf-btn").removeClass("select");
      })
       $(".rf-apply-btn-div a").click(function()
      {
        $(".overlay").hide();
        $(".refine-search-container").hide();
        $(this).parent().parent().parent().find(".rf-btn").removeClass("select");
        $(this).parent().parent().parent().find(".refine-search-container input").prop("checked", false);
        $(".rf-apply-btn").click();
      })
    })

  </script>